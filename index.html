<html>
    <head>
        <title>web3 test</title>
        <script src="jquery-3.2.1.js"></script>
        <script src="custom.js"></script>
    </head>
    <body>
        <h1>Welcome to web3 - looking like web1!</h1>
        <div id="content">Can I Have web3?!</div>
        Contract Address: <div id="ContractAddress"> </div>
        Contract Balance: <div id="ContractBalance"> </div>

        My Address: <div id="MyAddress"> </div>
        My Balance: <div id="MyBalance"> </div>
        
        <img src="./ani_what.gif" alt="Everyone Wants to be Make ICO" width="300" height="50" border="0">
        <script>
            window.addEventListener('load', function() {

            // Checking if Web3 has been injected by the browser (Mist/MetaMask)
            if (typeof web3 !== 'undefined') {
                // Use Mist/MetaMask's provider
                $('#content').text('I have web3 ICO!!!');
                window.web3 = new Web3(web3.currentProvider);
            } else {
                $('#content').text('I don\'t have web3 :(')
                console.log('No web3? You should consider trying MetaMask!')
                // fallback - use your fallback strategy (local node / hosted node + in-dapp id mgmt / fail)
                window.web3 = new Web3(new Web3.providers.HttpProvider("http://localhost:8545"));
            }
            var contractAddress = "0xF5A1543FD8c29c4538F57ABcd747abeFF4d74a3F";
            $("#ContractAddress").text(contractAddress);
                
            web3.eth.getBalance(contractAddress,function(error,response) {
                $("#ContractBalance").text(response);
                console.log("error: " + error + ", " + "response: " + response);
            }
        })
        </script>
    </body>
</html>
